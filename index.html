<!DOCTYPE html><html><head><title>Poe Guide</title><!-- style: include:styl styles/index.styl--><link type="text/css" rel="stylesheet" href="styles/index.css"><script src="//use.typekit.net/ldo1umf.js"></script><script>try{Typekit.load();}catch(e){}</script><script>(function(d) {var config = {kitId: 'ldo1umf', scriptTimeout: 3000}, h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)})(document);</script></head><body><main><h1><span>Poe Guide</span></h1><hr class="menu-top"><menu><ul><li class="index index-complete">1</li><li class="menuitem menuitem-complete"><a href="#introduction">Introduction</a></li><li class="menuitem menuitem-complete"><a href="#overview">Overview</a></li><li class="menuitem menuitem-complete"><a href="#getting-started">Getting Started</a></li><li class="menuitem menuitem-complete"><a href="#hello-world">Hello World</a></li></ul><ul><li class="index index-undefined">2</li><li class="menuitem menuitem-undefined"><a href="#basic-ui">Basic UI</a></li><li class="menuitem menuitem-complete"><a href="#structure">Structure</a></li><li class="menuitem menuitem-complete"><a href="#markup">Markup</a></li><li class="menuitem menuitem-complete"><a href="#styles">Styles</a></li><li class="menuitem menuitem-complete"><a href="#routes">Routes</a></li></ul><ul><li class="index index-undefined">3</li><li class="menuitem menuitem-undefined"><a href="#basic-api">Basic API</a></li><li class="menuitem menuitem-complete"><a href="#initializing">Initializing</a></li><li class="menuitem menuitem-complete"><a href="#login">Login</a></li><li class="menuitem menuitem-complete"><a href="#mongoose">Mongoose</a></li><li class="menuitem menuitem-incomplete"><a href="#wiring-up">Wiring Up</a></li><!-- +listitem('Front-Ends', 'incomplete')--><!-- +listitem('Contracts', 'incomplete')--><!-- +listitem('Systems', 'incomplete')--></ul><ul><li class="index index-incomplete">4</li><li class="menuitem menuitem-incomplete"><a href="#client-hypermedia">Client Hypermedia</a></li><li class="menuitem menuitem-incomplete"><a href="#data-binding">Data Binding</a></li><li class="menuitem menuitem-incomplete"><a href="#forms">Forms</a></li><li class="menuitem menuitem-incomplete"><a href="#composition">Composition</a></li><li class="menuitem menuitem-incomplete"><a href="#a-front-end">A Front End</a></li></ul><ul><li class="index index-incomplete">5</li><li class="menuitem menuitem-incomplete"><a href="#api-design">API Design</a></li><li class="menuitem menuitem-incomplete"><a href="#hypermedia">Hypermedia</a></li><li class="menuitem menuitem-incomplete"><a href="#specs-and-standards">Specs and Standards</a></li><li class="menuitem menuitem-incomplete"><a href="#a-mock-api">A Mock API</a></li></ul><ul><li class="index index-undefined">6</li><li class="menuitem menuitem-undefined"><a href="#appendix">Appendix</a></li><li class="menuitem menuitem-undefined"><a href="#organizations">Organizations</a></li><li class="menuitem menuitem-undefined"><a href="#resources">Resources</a></li><li class="menuitem menuitem-incomplete"><a href="#credits">Credits</a></li><li class="menuitem menuitem-incomplete"><a href="#license">License</a></li></ul></menu><hr class="menu-bottom"><div class="quotes"><div class="quote"><blockquote class="quote-value"></blockquote><strong class="quote-author"></strong></div></div><h2 id="introduction">Introduction</h2><section id="introduction-section" class="introduction-section"><div id="overview" class="subsection"><h3>Overview</h3><p>  Poe is a collection of open-source tools for web developers, and Poe UI is its front-end framework.</p>
<p>  Let&#39;s start with the basics by generating a skeleton Poe UI app locally.</p>
</div><div id="getting-started" class="subsection"><h3>Getting Started</h3><p>First off, this tutorial assumes a basic familiarity with the terminal, JS/HTML/CSS, and an editor of some kind.
As new concepts are introduced, please check out the resources we provide and revisit as necessary. We will be
focussing on the very highest level features.</p>
<p>Now, to kick things off, we will need <a href="&quot;http://nodejs.org/&quot;">node.js</a>, so install if you need to.</p>
<p>We&#39;ll need <a href="https://github.com/ddollar/foreman">foreman</a> as well, you might as well install it too while
you&#39;re at it.</p>
<div class='NOTE'>
<p>
If you&#39;re on OS X, it&#39;s better to install node via <a href="http://brew.sh">homebrew</a> or
use TJ Holowaychuck&#39;s <a href="http://github.com/tj/n">n</a>.
</p>
<p>
Here&#39;s a one-liner to quickly install <code>n</code>:
<pre><code>
(git clone <a href="https://github.com/tj/n.git">https://github.com/tj/n.git</a> /tmp/<em>n</em> &amp;&amp; cd /tmp/<em>n</em> &amp;&amp; make &amp;&amp; n stable)
</code></pre>
</p>
</div>
</div><div id="hello-world" class="subsection"><h3>Hello World</h3><p>In accordance with front-end law, any library that is capable of running a todo list <em>must</em>
demonstrate a todo list app; so that&#39;s what we&#39;ll do.</p>
<p>Start by opening your terminal and installing the <a href="https://github.com/poegroup/poe">poe</a> command line tool.</p>
<pre><code>npm i -g poe
</code></pre><p>After install finishes, navigate to an empty directory somewhere. This will be our app&#39;s root.</p>
<pre><code>mkdir ~/Projects/mndvns/todo-ui
cd ~/Projects/mndvns/todo-ui
poe create ui
</code></pre><p>At this point you&#39;ll be prompted for a project name, description, etc.
Let&#39;s use the following values for our project:</p>
<pre><code>project: todo-ui
description: todo user interface
port: 5000
api url: http://localhost:5001
</code></pre><p>It should then ask for a confirmation that resembles</p>
<pre><code>{
 &quot;project&quot;: &quot;todo-ui&quot;,
 &quot;username&quot;: &quot;mndvns&quot;,
 &quot;email&quot;: &quot;mail@mndvns.com&quot;,
 &quot;fullname&quot;: &quot;Michael Andrew Vanasse&quot;,
 &quot;description&quot;: &quot;todo user interface&quot;,
 &quot;PORT&quot;: &quot;5000&quot;,
 &quot;API_URL&quot;: &quot;http://localhost:5001&quot;
}
</code></pre><p>Agree to proceed, and let it do its thing. Once instantiated, you can start the app by running</p>
<pre><code>make start
</code></pre><div class='WARNING'>
If you receive a warning message, go
<a href="https://github.com/componentjs/guide/blob/master/component/getting-started.md#setup-authentication">here</a>
and ensure your github credentials are exposed properly.
</div>

<p>After a moment to install dependencies, our output should look something like this:</p>
<pre><code>14:38:42 web.1   | started with pid 44663
14:38:42 web.1   |    info : auto-reload enabled
14:38:42 web.1   | Server listening on port 5000
</code></pre><div class='NOTE'>
This log style may look familiar to you; we are using <strong><a href="https://github.com/ddollar/foreman">foreman</a></strong> to
run on your machine exactly as it does in production.
</div>

<p>It says it&#39;s listening, so let&#39;s navigate in our browser to <strong><a href="http://localhost:5000" target="_blank">localhost:5000</a></strong>
and see.</p>
<p><img src="img/new-app.png" alt="A newly initialied Poe UI app"></p>
<p>Great! We&#39;ve got a running app.</p>
</div></section><h2 id="basic-ui">Basic UI</h2><section id="basic-ui-section" class="basic-ui-section"><div id="structure" class="subsection"><h3>Structure</h3><p>Let's start by exploring how the project is organized. Here is our current project's tree:</p><div class="filetree"><div class="filetree-help"><p>Hover over a file see more information.</p>
<p>Click a file to toggle the information on/off.</p>
</div><div class="filetree-code"><div class="grouping parent-3 configuration"><div class="grouping-single">Configuration</div><div class="line file configuration"><code class="indent">|-- </code><div class="text"><code class="text-code">.env</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file configuration">NODE_ENV=development
API_URL=http://localhost:5001
</div><p>An <code>.env</code> file controls your environment. Unlike other project files, it should not be
version controlled, as doing so may reveal sensitive information.</p>
<p>Your environment variables are the most fundamental values to your application, and in your Poe app it will likely
provide your api&#39;s url at the very least.</p>
<p>Example:</p>
<pre><code class="lang-shell">API_URL=http://localhost:5001
NODE_ENV=development
</code></pre>
<p>For more information, read Heroku&#39;s <a href="https://devcenter.heroku.com/articles/config-vars#example">write-up</a>.</p>
</div></div></div><div class="line file configuration"><code class="indent">|-- </code><div class="text"><code class="text-code">package.json</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file configuration">{
  &quot;name&quot;: &quot;PROJECT&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;description&quot;: &quot;DESCRIPTION&quot;,
  &quot;author&quot;: &quot;ORGANIZATION&quot;,
  &quot;main&quot;: &quot;app.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;./node_modules/.bin/startup start&quot;
  },
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;https://github.com/REPO&quot;
  },
  &quot;engines&quot;: {
    &quot;node&quot;: &quot;0.10.x&quot;,
    &quot;npm&quot;: &quot;1.x.x&quot;
  },
  &quot;dependencies&quot;: {
    &quot;poe-ui&quot;: &quot;^0.4.8&quot;,
    &quot;startup&quot;: &quot;^1.0.0&quot;,
    &quot;envs&quot;: &quot;^0.1.4&quot;
  }
}</div><p>The <code>package.json</code> is the configuration file for any node project.</p>
<p>For more information, check out <strong><code>npm help json</code></strong>.</p>
</div></div></div><div class="line file configuration show"><code class="indent">|-- </code><div class="text"><code class="text-code">component.json</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file configuration show">{
  &quot;name&quot;: &quot;PROJECT&quot;,
  &quot;repository&quot;: &quot;REPO&quot;,
  &quot;description&quot;: &quot;DESCRIPTION&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;dependencies&quot;: {
    &quot;poegroup/poe-ui&quot;: &quot;^0.4.15&quot;,
    &quot;camshaft/component-angular&quot;: &quot;NG_VERSION&quot;,
    &quot;camshaft/component-angular-route&quot;: &quot;NG_VERSION&quot;
  }
}</div><p><a href="http://component.github.io/">Component</a> is a static asset tool. It&#39;s a dependency manager, distributor
as well as a general-purpose task runner. You can think of it as <a href="https://www.npmjs.com">npm</a> for all
things static: javascript, styles, images, fonts, etc.</p>
<p>To install, update, or remove components from your project, you can either</p>
<ul>
<li>edit your project&#39;s <code>component.json</code> file by hand (probably simpler)</li>
<li>or use the component <a href="https://github.com/componentjs/guide/blob/master/component/getting-started.md">CLI</a></li>
</ul>
<p>You don&apos;t have to worry about actually building the components however; when Poe UI run, it watches for changes
to your <code>component.json</code> and will install/remove/rebuild as necessary.</p>
<p>As far as structure goes, the <code>component.json</code> works almost identically to npm&apos;s <code>package.json</code>.</p>
<div class='.NOTE'>
Component pushed the community in a much more modular direction in 2012 - 2014, but has fallen out of popularity as
npm is becoming the standard for front- and back-end JS management. In the upcoming stable version of Poe UI this file
is replaced entirely by npm.
</div>

</div></div></div></div><div class="grouping parent-3 boilerplate"><div class="grouping-single">Boilerplate</div><div class="line file boilerplate"><code class="indent">|-- </code><div class="text"><code class="text-code">Makefile</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file boilerplate">include ./node_modules/poe-ui/tasks.mk
</div><p>Make is Poe&#39;s dependency tracker for builds during development
and in productions. Although it doesn&#39;t actually watch files when
they change, it determines which files rely on which, and how to
build as effectively as possible.</p>
<p>Since Poe app&#39;s have a consistent structure, the poe-ui module
keeps it&#39;s own <code>mk</code> file which is the called by your Poe app&#39;s
Makefile when you first start. So although Make has some
complex tasks under the covers, you only need one line on your
Makefile.</p>
<p>This file may be going away in a future release of Poe as we
keep simplifying.</p>
<p>If you&#39;re interested in Make at all (and who isn&#39;t?), here is the
<a href="https://github.com/poegroup/poe-ui-kit/blob/master/build.mk">files that does the heavy lifting in of Poe&#39;s builds</a>.</p>
</div></div></div><div class="line file boilerplate"><code class="indent">|-- </code><div class="text"><code class="text-code">Procfile.dev</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file boilerplate">web: ./node_modules/.bin/startup start
debug: ./node_modules/.bin/startup start --debug
</div><p>Heroku&#39;s <code>foreman</code> references this. Generally, it does not need to be touched.</p>
<p>For more information, check out <strong><a href="https://devcenter.heroku.com/articles/procfile">Heroku&#39;s docs</a></strong>.</p>
<div class='NOTE'>
This file is going away in the upcoming release.
</div>
</div></div></div><div class="line file boilerplate"><code class="indent">|-- </code><div class="text"><code class="text-code">app.js</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file boilerplate">/**
 * Expose the application.
 */

var app = module.exports = require('poe-ui')();
</div><p>This is the node.js entry point for your UI application. 
It instanciaties a new <strong>poe-ui</strong> application with some high-level configuration (including
setting the API namespace to <strong>/api</strong> by default).</p>
</div></div></div></div><div class="grouping parent-1"><div class="grouping-single">  </div><div class="line file"><code class="indent">|-- </code><div class="text"><code class="text-code ignored">public</code></div></div></div><div class="grouping parent-3 javascript"><div class="grouping-single">Javascript</div><div class="line file"><code class="indent">|   |-- </code><div class="text"><code class="text-code">javascripts</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"></div></div></div><div class="line file"><code class="indent">|   |   |-- </code><div class="text"><code class="text-code">index.js</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file">/**
 * Module dependencies
 */

var App = require('poe-ui');

/**
 * Expose the app
 */

var app = module.exports = App('PROJECT');

/**
 * Load plugins here with the 'use' method:
 *
 *   app.use(require('modal'));
 *
 */
</div><p>This is the entry point for the front-end builder.</p>
</div></div></div><div class="line file"><code class="indent">|   |   `-- </code><div class="text"><code class="text-code">routes.js</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file">/**
 * Expose the app routes
 */

module.exports = {
  '/': 'index'
};
</div><p>This is where to handle your client-side routing. We&#39;ll get to it later;
all you need to know right now is that our index is mounted on the root.</p>
</div></div></div></div><div class="grouping parent-3 partials"><div class="grouping-single">Partials</div><div class="line file markup"><code class="indent">|   |-- </code><div class="text"><code class="text-code">partials</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><p>The <code>partials</code> directory contains Jade files which are compiled by node to HTML and delivered to the client in the form of
Angular template in the <code>build/app.js</code>. This leaves only a tiny footprint on the client and frees the server up from having
to manage a template runtime.</p>
<p>For more information on Jade, check out <strong><a href="http://jade-lang.com/">the docs</a></strong>.</p>
</div></div></div><div class="line file markup"><code class="indent">|   |   |-- </code><div class="text"><code class="text-code">header.jade</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file markup">h1 PROJECT
</div></div></div></div><div class="line file markup"><code class="indent">|   |   `-- </code><div class="text"><code class="text-code">index.jade</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file markup">extends ../node_modules/poe-ui/views/layout

block body
  header(data-ng-include, src=&quot;'/partials/header.jade'&quot;)
  main(data-ng-view=&quot;&quot;)
</div></div></div></div></div><div class="grouping parent-2 styles"><div class="grouping-single">Styles</div><div class="line file styles"><code class="indent">|   `-- </code><div class="text"><code class="text-code">stylesheets</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"></div></div></div><div class="line file styles"><code class="indent">|       `-- </code><div class="text"><code class="text-code">index.styl</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file styles">// define core styles

html
  font-family sans-serif

body
body &gt; div
  height 100%
  width 100%

body
  position absolute
  margin 0
  text-align center
  &gt; div
    display flex
    flex-direction column
    justify-content center

h1
  font-weight 100
  margin-top 0

a
  padding 10px
</div></div></div></div></div><div class="grouping parent-2 view"><div class="grouping-single">View</div><div class="line file"><code class="indent">`-- </code><div class="text"><code class="text-code">views</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"></div></div></div><div class="line file"><code class="indent">    `-- </code><div class="text"><code class="text-code">index.jade</code><input type="checkbox" hidden class="text-checkbox"><div class="inner"><div class="raw-file">extends ../node_modules/poe-ui/views/layout

block body
  header(data-ng-include, src=&quot;'/partials/header.jade'&quot;)
  main(data-ng-view=&quot;&quot;)
</div><p>This is the &#39;chrome&#39; for our app, i.e., the area surrounding the app that remains
the same. The <code>main</code> element is where our <strong><code>public/partials/index.jade</code></strong> is loaded.</p>
<p>To include another partial (like a footer), simply point to the path in the <code>src</code> attribute
of an element as the <strong><code>header</code></strong> does here.</p>
<div class='NOTE'>
Note that the path is wrapped in double quotations (&quot;&#39;path/here&#39;&quot;).
</div>

<p>For more information on Jade, check out <strong><a href="http://jade-lang.com/">the docs</a></strong>.</p>
</div></div></div></div></div></div></div><div id="markup" class="subsection"><h3>Markup</h3><p>Now that we have a lay of the land, maybe we should edit a file.
Since this will be a UI app most of our time in this project will
be spent in the <code>public</code> directory.</p>
<p>Let&#39;s open the <code>public/partials/header.jade</code> file, and change</p>
<pre><code class="lang-sh">h1 my-app
</code></pre>
<p>to</p>
<pre><code class="lang-sh">h1 Todo
</code></pre>
<p>Once the file is saved, your browser should automatically update. This is true when
you edit any files in the app, with the exception of the <code>.env</code> file; editting the <code>.env</code>
<em>will</em> require restarting the server.</p>
<p>The browser should now look like this:</p>
<p><img src="img/rename.png" alt="New header"></p>
</div><div id="styles" class="subsection"><h3>Styles</h3><p>Poe uses <a href="http://learnboost.github.io/stylus/">Stylus</a> to preprocess its stylesheets.
Although Stylus is the most feature-rich CSS preprocessor (compared to LESS and SASS),
vanilla CSS is still syntactically correct, so you may choose to make use of Stylus&#39;s
features or not. Up to you. In this tutorial, we will.</p>
<p>We&#39;ll also use the <strong><a href="https://github.com/shoelace-ui/aglet">aglet</a></strong> framework and
the <strong><a href="https://github.com/tj/nib">nib</a></strong> helper library. To install, run the following
in your application root:</p>
<pre><code>npm i --save shoelace-ui-aglet nib
</code></pre><p>There we go. We can now <code>@require</code> these from our stylesheet.</p>
<div class='NOTE'>
To learn more about <code>@require</code>, check out the <a href="http://learnboost.github.io/stylus/docs/import.html">Stylus documentation</a>.
</div>

<p>So let&#39;s bring them in and while we&#39;re at it, add some styles. How about we frame our app
in gray against a white background?</p>
<p>Open <code>public/stylesheets/index.styl</code> and change</p>
<pre><code>// define core styles

html
  font-family sans-serif

body
body &gt; div
  height 100%
  width 100%

body
  position absolute
  margin 0
  text-align center
  &gt; div
    display flex
    flex-direction column
    justify-content center

h1
  font-weight 100
  margin-top 0

a
  padding 10px
</code></pre><p>to</p>
<pre><code>// variables

input--apply-all = true

// dependencies

@require &#39;shoelace-ui-aglet&#39;
@require &#39;nib&#39;

// core styles

html
  font-family sans-serif
  font-size 14px

body
  height 100%
  width 100%
  background rgba(black, .1)
  position absolute
  margin 0

body &gt; div
  background rgba(white .9)
  box-shadow 0 2px 6px 0 rgba(black, 0.2), 0 5px 50px 0 rgba(black, 0.15)
  box-sizing border-box
  display flex
  flex-direction column
  max-width 500px
  padding padding--extra-large
  margin @padding auto
  width 100%

h1
  font-weight 100
  margin-top 0
  text-align center

a
  padding-right 10px
</code></pre><div class='NOTE'>
<p>
If this is the first time you&#39;ve seen the <code>rem</code> unit, you can <strong><a href="http://snook.ca/archives/html_and_css/font-size-with-rem">read about it here</a></strong>.
</p>
<p>
With the <code>@</code> sigil, we&#39;re making use of Stylus&#39;s <strong><a href="http://learnboost.github.io/stylus/docs/variables.html#property-lookup">property lookup</a></strong>
feature.
</p>
<p>
We&#39;re also using the Stylus builtin <strong><a href="http://learnboost.github.io/stylus/docs/bifs.html#alphacolor-value">rgba</a></strong> to write colors.
</p>
</div>

<p>Our Todo app should look like this now:</p>
<p><img src="img/background.png" alt="New background"></p>
</div><div id="routes" class="subsection"><h3>Routes</h3><p>So we know how to edit markup and change styles. Now what? So far our app
is basically a glorified static page.</p>
<p>Let&#39;s add a login page to see how routing works.</p>
<p>First, let&#39;s write <code>public/partials/login.jade</code> as</p>
<pre><code>form
  input(type=&#39;text&#39; placeholder=&#39;username&#39;)
  input(type=&#39;password&#39; placeholder=&#39;password&#39;)
</code></pre><p>And we&#39;ll change <code>public/javascripts/routes.js</code> from</p>
<pre><code>module.exports = {
  &#39;/&#39;: &#39;index&#39;
};
</code></pre><p>to</p>
<pre><code>module.exports = {
  &#39;/&#39;: &#39;index&#39;,
  &#39;/login&#39;: &#39;login&#39;
};
</code></pre><p>The <code>/login</code> key is the path, and the value is the partial to which the
router should point. In this case, going to <a href="localhost:5000/login">localhost:5000/login</a> should
show us the form at the <code>login.jade</code> partial. Let&#39;s see:</p>
<p><img src="img/login.png" alt="Login page"></p>
<p>Perfect!</p>
<p>But to create an actual login, we&#39;ll need to set up an API.</p>
</div></section><h2 id="basic-api">Basic API</h2><section id="basic-api-section" class="basic-api-section"><div id="initializing" class="subsection"><h3>Initializing</h3><p>Let&#39;s navigate to a new directory like we did earlier.</p>
<pre><code>mkdir -p ~/Projects/mndvns/todo-api
cd ~/Projects/mndvns/todo-api
poe create api
</code></pre><p>Once again, we&#39;re asked to fill some project fields. Let&#39;s use the following values:</p>
<pre><code>project: todo-api
description: todo api
port: 5001
</code></pre><p>And the confirmation should resemble </p>
<pre><code>{
  &quot;project&quot;: &quot;todo-api&quot;,
  &quot;username&quot;: &quot;mndvns&quot;,
  &quot;email&quot;: &quot;mail@mndvns.com&quot;,
  &quot;fullname&quot;: &quot;Michael Andrew Vanasse&quot;,
  &quot;description&quot;: &quot;todo api&quot;,
  &quot;PORT&quot;: &quot;5001&quot;
}
</code></pre><p>Just like before, let&#39;s run</p>
<pre><code>make start
</code></pre><p>Once it&#39;s running, we&#39;ll check out <a href="http://localhost:5001">localhost:5001</a> and see</p>
<p><img src="img/new-api.png" alt="Our new API"></p>
<div class='NOTE'>
If you&#39;re using Chrome, I highly encourage getting the <a href="https://chrome.google.com/webstore/detail/hyperchrome/micpjacfpmndnocgeldgmhdgjeaiokhk">hyper.chrome</a>
extension. It makes navigating hypermedia APIs easy and fun.
</div>

<p>Nice! So if everything&#39;s working right, we should be able to see this API mounted on our UI
under <code>/api</code>. Let&#39;s check...</p>
<p><img src="img/api-mounted.png" alt="API mounted properly"></p>
<p>Bam. Done and done.</p>
</div><div id="login" class="subsection"><h3>Login</h3><p>Let&#39;s have the api to serve a login form and a signup form on <code>/</code>. Change <code>api.js</code> from</p>
<pre><code>api.get(&#39;/&#39;, function(req, res, next) {
  res.json({
    app: {
      name: &#39;todo-api&#39;,
      description: &#39;todo api&#39;,
      author: {href: req.base + &#39;/author&#39;}
    }
  });
});
</code></pre><p>to</p>
<pre><code>api.get(&#39;/&#39;, function(req, res) {
  res.json({
    signup: {
      method: &#39;POST&#39;,
      action: req.base,
      input: {
        _action: {
          type: &#39;hidden&#39;,
          value: &#39;signup&#39;
        },
        username: {
          type: &#39;text&#39;,
          required: true
        },
        password: {
          type: &#39;password&#39;,
          required: true
        },
        &#39;first-name&#39;: {
          type: &#39;text&#39;,
          placeholder: &#39;first name&#39;
        },
        &#39;last-name&#39;: {
          type: &#39;text&#39;,
          placeholder: &#39;last name&#39;
        }
      }
    },
    login: {
      method: &#39;POST&#39;,
      action: req.base,
      input: {
        _action: {
          type: &#39;hidden&#39;,
          value: &#39;login&#39;
        },
        username: {
          type: &#39;text&#39;,
          required: true
        },
        password: {
          type: &#39;password&#39;,
          required: true
        }
      }
    }
  });
});
</code></pre><p>Take a look: we&#39;re giving back two forms: <code>login</code> and <code>signup</code>, each of which
submit a <code>POST</code> to our root, <code>/</code>. But if we submit the forms now, we wouldn&#39;t get any
response; we need to add endpoints in our API for <code>POST /</code>.</p>
<p>Let&#39;s add the following lines to our <code>api.js</code>:</p>
<pre><code>api.post(&#39;/&#39;, function(req, res, next) {
  var b = req.body;
  if (b._action === &#39;login&#39;) return next(&#39;route&#39;);
  if (!b.username || !b.password) return res.send(400);

  // TODO
  // save user then
  // redirect to user page

});

api.post(&#39;/&#39;, function(req, res, next) {
  var b = req.body;
  var username = b.username;
  if (!username) return res.send(400);

  // TODO
  // find user then
  // verify credentials
  // redirect to user page

});
</code></pre><p>Obviously, this still won&#39;t work. We need some way of storing our users. Let&#39;s use <a href="http://mongoosejs.com/">mongoose.js</a>.</p>
</div><div id="mongoose" class="subsection"><h3>Mongoose</h3><p>In our app&#39;s root, run</p>
<pre><code>npm i --save mongoose
</code></pre><p>And make sure you have <a href="http://www.mongodb.org/downloads">mongodb</a> installed, then
go to a fresh terminal and run</p>
<pre><code>mongod
</code></pre><div class='NOTE'>
If you&#39;re on OS X, install mongo via
<pre><code>
brew install mongodb
</pre></code>
</div>

<p>Now, at the top of <code>api.js</code> right under <code>var api = ...</code> around line 14, add</p>
<pre><code>var mongoose = require(&#39;mongoose&#39;);
mongoose.connect(&#39;mongodb://localhost/todo-api&#39;);

var Schema = mongoose.Schema;
var ObjectID = Schema.ObjectId;

var UserS = new Schema({
  username: String,
  password: String,
  firstName: String,
  lastName: String
});

var User = mongoose.model(&#39;User&#39;, UserS);

api.param(&#39;user&#39;, function(req, res, next, id) {
  req.userBase = req.base + &#39;/&#39; + id;
  User.findById(id, function(err, user) {
    if (err) return next(err);
    if (!user) return res.send(404);
    res.locals.user = user;
    next();
  });
});
</code></pre><p>And back at our <code>POST /</code> endpoints, we can add the user handling like so:</p>
<pre><code>api.post(&#39;/&#39;, function(req, res, next) {
  var b = req.body;
  if (b._action === &#39;login&#39;) return next(&#39;route&#39;);
  if (!b.username || !b.password) return res.send(400);
  var user = new User(bodyToUser(b));
  user.save(function(err) {
    if (err) return next(err);
    res.redirect(req.base + &#39;/&#39; + user._id);
  });
});

api.post(&#39;/&#39;, function(req, res, next) {
  var b = req.body;
  var username = b.username;
  if (!username) return res.send(400);
  User.find({username: username}, function(err, users) {
    if (err) return next(err);
    if (!users || !users[0]) return res.send(404);
    var user = users[0];
    if (user.password !== b.password) return res.send(401);
    res.redirect(req.base + &#39;/&#39; + user._id);
  });
});
</code></pre><p>So let&#39;s try it out! If you got the <a href="https://chrome.google.com/webstore/detail/hyperchrome/micpjacfpmndnocgeldgmhdgjeaiokhk">hyper.chrome extension</a>,
you can actually fill and submit forms right in the browser. Let&#39;s try it.</p>
<p>Go to <a href="http://localhost:5000/api">localhost:5000/api</a> and fill out the <code>signup</code> form for</p>
<pre><code>username: rambo
password: 123
first name: John
last name: Rambo
</code></pre><p><img src="img/api-signup.png" alt="First user signup"></p>
<p>Now let&#39;s use mongo&#39;s command-line tool to query the database and see if we succeeded. In a new terminal, run</p>
<pre><code>mongo
</code></pre><p>This is mongo&#39;s interactive shell. If we check our database for users...</p>
<pre><code>&gt; use todo-api
switched to db todo-api
&gt; db.users.find({}).toArray()
[
        {
                &quot;_id&quot; : ObjectId(&quot;54c703a9ea6c44c06a625044&quot;),
                &quot;username&quot; : &quot;rambo&quot;,
                &quot;firstName&quot; : &quot;John&quot;,
                &quot;lastName&quot; : &quot;Rambo&quot;,
                &quot;password&quot; : &quot;123&quot;,
                &quot;__v&quot; : 0
        }
]
&gt;
</code></pre><p>Booya! We have out first user, John Rambo.</p>
</div></section><h2 id="appendix">Appendix</h2><section id="appendix-section" class="appendix-section"><div id="organizations" class="subsection"><h3>Organizations</h3><h4 id="-poegroup-https-github-com-poegroup-"><a href="https://github.com/poegroup">poegroup</a></h4>
<p>Poegroup&#39;s focus is on all things web-related in order to provide a robust, production-ready
environment for developers that is simple and easy to learn.</p>
<h4 id="-hypergroup-https-github-com-hypergroup-"><a href="https://github.com/hypergroup">hypergroup</a></h4>
<p>Hypergroup&#39;s focus is on developing hypermedia tools, best practices, and community.
Hypergroup handles the <a href="https://github.com/hypergroup/hyper-json">hyper+json</a> spec
and a number of hyper+json clients, including <a href="https://github.com/hypergroup/ng-hyper">ng-hyper</a>,
an angular.js client and <a href="https://github.com/hypergroup/hyper.chrome">hyper.chrome</a>, an in-browser
JSON navigator and debugger.</p>
<h4 id="-shoelace-http-github-com-shoelace-ui-"><a href="http://github.com/shoelace-ui">shoelace</a></h4>
<p>Shoelace is focused on reusable design in CSS and the DOM. The
<a href="https://github.com/shoelace-ui/aglet">aglet</a> framework provides a bootrap-like
framework with a bottom-up approach. Shoelace also manages tools for colors, font, and icons.</p>
<h4 id="-lang-js-http-github-com-lang-js-"><a href="http://github.com/lang-js">lang-js</a></h4>
<p>A collection of language manipulation tool for browsers and node.js.</p>
<h4 id="-directiv-http-github-com-directiv-"><a href="http://github.com/directiv">directiv</a></h4>
</div><div id="resources" class="subsection"><h3>Resources</h3><ul>
<li><p><a href="http://hypergroup.github.io/ng-hyper">ng-hyper</a></p>
<p>an introduction to ng-hyper</p>
</li>
<li><p><a href="https://github.com/hypergroup/hyper-json">hyper+json</a></p>
<p>the hyper+json spec</p>
</li>
<li><p><a href="https://github.com/hypergroup/hyper.chrome">hyper.chrome</a></p>
<p>a very useful Chrome extension for APIs</p>
</li>
<li><p><a href="https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en">batarang</a></p>
<p>a useful Chrome extension for Angular.js</p>
</li>
</ul>
</div></section><script>var REVEAL_TIME = 2000;

var fileContent = document.createElement('div');
fileContent.className = 'filetree-content';
var subsection = document.body.querySelector('.filetree');
subsection.appendChild(fileContent);
var fileHelp = document.querySelector('.filetree-help');

var lines = document.querySelectorAll('.line .text-code');
var arr = [];
for(var i = 0; i < lines.length; i++) arr[i] = lines[i];

arr.forEach(function(line, idx){
  line = arr[idx];
  if (~line.className.indexOf('ignored')) return;
  var content = line.parentElement.children[line.parentElement.children.length - 1]
  if (content.className !== 'inner') content = false;
  else fileContent.appendChild(content);

  line.addEventListener('mouseenter', toggle);
  line.addEventListener('mouseleave', toggle);
  line.addEventListener('click', toggle);

  function toggle(ev) {
    var box = ev.target.nextElementSibling;
    var parent = ev.target.parentElement;
    var parentActive = ~parent.className.indexOf('active');
    if (ev.type === 'click') box.checked = !box.checked;
    if (ev.type === 'mouseleave' && !box.checked && parentActive) activate(parent);
    if (ev.type === 'mouseenter' && !parentActive) deactivate(parent);
  }

  var timeout;

  function activate(el) {
    el.className = 'text';
    content.className = 'inner';
    fileHelp.className = 'filetree-help hidden'
  }

  function deactivate(el) {
    el.className = 'text active';
    content.className = 'inner active';
    reset();
  }

  function clear() {
    fileHelp.className = 'filetree-help hidden'
    window.clearTimeout(timeout);
    timeout = false;
  }

  function reset() {
    clear();
    timeout = window.setTimeout(reveal, REVEAL_TIME);
  }

  function reveal() {
    var active = document.querySelectorAll('.filetree-content .active')
    if (active.length) return;
    fileHelp.className = 'filetree-help'
  }
});
</script></main></body><script>window.quotes = [{":c":"All programmers are optimists.",":a":"Frederick Brooks"},{":c":"Whereas Europeans generally pronounce my name the right way ('Nick-louse Veert'), Americans invariably mangle it into 'Nickel's Worth.' This is to say that Europeans call me by name, but Americans call me by value.",":a":"Niklaus Wirth"},{":c":"If the code and the comments disagree, then both are probably wrong."},{":c":"When we understand knowledge-based systems, it will be as before -- except our fingertips will have been singed.",":a":"Alan J. Perlis"},{":c":"Only Half of programming is coding. The other 90% is debugging."},{":c":"Education is the process of learning more and more about less and less until one knows everything about nothing and is entitled to call oneself 'Doctor'."},{":c":"Good web applications should look like trifle.",":a":"Cal Henderson"},{":c":"I have found that the reason a lot of people are interested in artificial intelligence is the same reason a lot of people are interested in artificial limbs: they are missing one.",":a":"David Parnas"},{":c":"Designing software in a team is like writing poetry in a committee meeting.",":a":"Joel Spolsky"},{":c":"It is easier to optimize correct code than to correct optimized code."},{":c":"A C program is like a fast dance on a newly waxed dance floor by people carrying razors.",":a":"Waldi Ravens"},{":c":"All programs have at least one bug remaining and can be optimized by one byte. Thus, by mathematical induction, all programs can be reduced to one byte. And it won't work."},{":c":"To err is human, but to really foul things up you need a computer.",":a":"Paul Ehrlich"},{":c":"Making something variable is easy. Controlling duration of constancy is the trick.",":a":"Alan J. Perlis"},{":c":"There's a fine line between being on the leading edge and being in the lunatic fringe.",":a":"Frank Armstrong"},{":c":"Computer programmers don't byte, they nibble a bit."},{":c":"Tell me what you need and I'll tell you how to get along without it."},{":c":"On the 7th day ... God began debugging."},{":c":"They won't tell you that they don't understand it; they will happily invent their way through the gaps and obscurities.",":a":"V.A. Vyssotsky on software programmers and their views on specifications"},{":c":"Human beings are not accustomed to being perfect, and few areas of human activity demand it. Adjusting to the requirement for perfection is, I think, the most difficult part of learning to program."},{":c":"C: a language that combines all the elegance and power of assembly language with all the readability and maintainability of assembly language."},{":c":"I (...) am rarely happier than when spending an entire day programming my computer to perform automatically a task that would otherwise take me a good ten seconds to do by hand.",":a":"Douglas Adams"},{":c":"If you give someone a program, you will frustrate them for a day; if you teach them how to program, you will frustrate them for a lifetime."},{":c":"Program testing can be a very effective way to show the presence of bugs, but is hopelessly inadequate for showing their absence.",":a":"Edsger Dijkstra"},{":c":"In a world without walls and fences, who needs Windows and Gates?"},{":c":"Symmetry is a complexity-reducing concept (co-routines include subroutines); seek it everywhere.",":a":"Alan J. Perlis"},{":c":"Singleton is a misconcept in OOP unless it's used as a misconcepted paradigm for application development."},{":c":"Think of all the psychic energy expended in seeking a fundamental distinction between \"algorithm\" and \"program\".\n",":a":"Alan J. Perlis"},{":c":"If it doesn't work, it doesn't matter how fast it doesn't work.",":a":"Ravera's observation on premature optimization"},{":c":"We're even wrong about which mistakes we're making.",":a":"Carl Winfeld"},{":c":"Complexity has nothing to do with intelligence, simplicity does.",":a":"Larry Bossidy"},{":c":"I will not be a lemming and follow the crowd over the cliff and into the C.",":a":"John Beidler"},{":c":"They won't tell you that they don't understand it; they will happily invent their way through the gaps and obscurities.",":a":"V.A. Vyssotsky on software programmers and their views on specifications"},{":c":"One who works with their hands is a laborer.\nOne who works with their hands and their mind is a craftsman.\nOne who works with their hands, mind and heart is an artist.\n"},{":c":"I've never written the best code I've ever written."},{":c":"The word “experienced” often refers to someone who's gotten away with doing the wrong thing more frequently than you have.\n",":a":"Laurence Gonzales"},{":c":"Every language has an optimization operator. In C++ that operator is ‘//'"},{":c":"It is easier to optimize correct code than to correct optimized code."},{":c":"To most Java developers, Ruby/Rails is like a mistress. Ruby/Rails is young, new, and exciting; but eventually we go back to old faithful, dependable, and employable Java with some new tricks and idioms and we are the better programmer for it.",":a":"Juixe TechKnow"},{":c":"We have the mini and the micro computer. In what semantic niche would the pico computer fall?",":a":"Alan J. Perlis"},{":c":"The proof of a system's value is its existence.",":a":"Alan J. Perlis"},{":c":"Ever spend a little time reading comp.lang.c++ ? That's really the best place to learn about the number of C++ users looking for a better language.",":a":"R. William Beckwith"},{":c":"C: a language that combines all the elegance and power of assembly language with all the readability and maintainability of assembly language."},{":c":"A programmer started to cuss\nBecause getting to sleep was a fuss\nAs he lay there in bed\nLooping 'round in his head\nwas: while(!asleep()) sheep++;\n"},{":c":"He who hasn't hacked assembly language as a youth has no heart. He who does as an adult has no brain.",":a":"John Moore"},{":c":"Think of it this way: threads are like salt, not like pasta. You like salt, I like salt, we all like salt. But we eat more pasta.",":a":"Larry McVoy"},{":c":"Some programmers try to reach higher by standing on other programmers' shoulders. Other programmers try to reach higher by standing on other programmers' toes."},{":c":"Wherever there is modularity there is the potential for misunderstanding: Hiding information implies a need to check communication.",":a":"Alan J. Perlis"},{":c":"Saying that Java is good because it works on all platforms is like saying anal sex is good because it works on all genders."},{":c":"Documentation is like term insurance: It satisfies because almost no one who subscribes to it depends on its benefits.",":a":"Alan J. Perlis"},{":c":"Software and cathedrals are much the same - first we build them, then we pray."},{":c":"To err is human, but to really foul things up you need a computer.",":a":"Paul Ehrlich"},{":c":"This is important, and a little hard to understand. English is useful because it's a mess. Since English is a mess, it maps well onto the problem space, which is also a mess, which we call reality. Similarly, Perl was designed to be a mess (though in the nicest of possible ways).",":a":"Larry Wall"},{":c":"Enlightened trial and error outperforms the planning of flawless intellects.",":a":"David Kelly"},{":c":"The goal of Computer Science is to build something that will last at least until we've finished building it."},{":c":"Any fool can use a computer. Many do.",":a":"Ted Nelson"},{":c":"Good programmers learn more from \"That's not what I expected!\" than from getting it right the first time.\n"},{":c":"Every dark corner you haven't explored with your flashlight is full of bugs.",":a":"Kent Beck and Martin Fowler"},{":c":"There are only two industries that refer to their customers as users: the computer industry and the drug trade.",":a":"Edward Tufte"},{":c":"When I am working on a problem I never think about beauty. I think only how to solve the problem. But when I have finished, if the solution is not beautiful, I know it is wrong.",":a":"R. Buckminster Fuller"},{":c":"Must be zero, or equal to MAPI_UNICODE. In either case, however, this parameter is ignored.",":a":"MSDN"},{":c":"The whole point of getting things done is knowing what to leave undone.",":a":"Oswald Chambers"},{":c":"If the automobile had followed the same development cycle as the computer, a Rolls-Royce would today cost $100, get a million miles per gallon, and explode once a year, killing everyone inside.",":a":"Robert X. Cringely"},{":c":"It's hardware that makes a machine fast. It's software that makes a fast machine slow.",":a":"Craig Bruce"},{":c":"Motto for a research laboratory: What we work on today, others will first think of tomorrow.",":a":"Alan J. Perlis"},{":c":"Going from programming in Pascal to programming in C, is like learning to write in Morse code.",":a":"J.P. Candusso"},{":c":"The sooner we start coding fewer frameworks and more programs the sooner we'll become better programmers.",":a":"Warped Java Guy Elementary Java Solutions"},{":c":"Program testing can be a very effective way to show the presence of bugs, but is hopelessly inadequate for showing their absence.",":a":"Edsger Dijkstra"},{":c":"It's interface, not in your face.",":a":"Kai Krause"},{":c":"It's hardware that makes a machine fast. It's software that makes a fast machine slow.",":a":"Craig Bruce"},{":c":"Walking on water and developing software from a specification are easy if both are frozen.",":a":"Edward V Berard"},{":c":"When someone says \"I want a programming language in which I need only say what I wish done,\" give him a lollipop.\n",":a":"Alan J. Perlis"},{":c":"When someone says \"I want a programming language in which I need only say what I wish done,\" give him a lollipop.\n",":a":"Alan J. Perlis"},{":c":"You can write software expecting the hardware to be perfect, unfortunately hardware is not perfect and you have to fix it in code.",":a":"W. Giraud"},{":c":"I finally found a definition for \"middleware\". \"Middleware\" is the software nobody wants to pay for.\n",":a":"Chris Stone"},{":c":"I went to school to learn how to program software applications, which inevitably have bug defects. There was no course at my university on testing, debugging, profiling, or optimization. These things you have to learn on your own, usually in a tight deadline.",":a":"Juixe TechKnow"},{":c":"C trades a slap on the wrist at compile time for a knife in the back at run time."},{":c":"God is Real, unless declared Integer."},{":c":"Software is under a constant tension. Being symbolic it is arbitrarily perfectible; but also it is arbitrarily changeable.",":a":"Alan J. Perlis"},{":c":"Sure, it's overkill. But you can never have too much overkill..."},{":c":"If Java had true garbage collection, most programs would delete themselves upon execution.",":a":"Robert Sewell"},{":c":"I'll try to be nicer if you try to be smarter.",":a":"Assaf Nitzan"},{":c":"In man-machine symbiosis, it is man who must adjust: The machines can't.",":a":"Alan J. Perlis"},{":c":"Manually managing blocks of memory in C is like juggling bars of soap in a prison shower: It's all fun and games until you forget about one of them."},{":c":"Any fool can write code that a computer can understand. Good programmers write code that humans can understand.",":a":"Martin Fowler"},{":c":"You're never done, you just run out of time."},{":c":"One Page Principle: A specification that will not fit on one page of 8.5x11 inch paper cannot be understood.",":a":"Mark Ardis"},{":c":"Whatever code we hack, be it programming language, poetic language, math or music, curves or colourings, we create the possibility of new things entering the world. Not always great things, or even good things, but new things.",":a":"McKenzie Wark in \"A hacker Manifesto\":02\n"},{":c":"It can scarcely be denied that the supreme goal of all theory is to make the irreducible basic elements as simple and as few as possible without having to surrender the adequate representation of a single datum of experience.",":a":"Albert Einstein"},{":c":"Saying that Java is good because it works on all platforms is like saying anal sex is good because it works on all genders."},{":c":"Profanity is the one language all programmers know best."},{":c":"It works on my machine."},{":c":"I get as much enjoyment from trashing code as I do from scratching it out in the first place!"},{":c":"There will always be things we wish to say in our programs that in all known languages can only be said poorly.",":a":"Alan J. Perlis"},{":c":"Some programmers try to reach higher by standing on other programmers' shoulders. Other programmers try to reach higher by standing on other programmers' toes."},{":c":"Every program attempts to expand until it can read mail. Those programs which cannot so expand are replaced by ones which can.",":a":"Jamie Zawinski"},{":c":"Development has two outputs... Code & Bugs"},{":c":"Deleted code is debugged code.",":a":"Jeff Sickel"},{":c":"Computer programmers don't byte, they nibble a bit."},{":c":"It won't be covered in the book. The source code has to be useful for something, after all...",":a":"Larry Wall"}];// get one random quote
function randomQuote(){
  var obj = quotes[Math.floor(Math.random()*quotes.length)];
  document.querySelector('.quote-value').textContent = obj[':c'];
  if (!obj[':a']) return;
  document.querySelector('.quote-author').textContent = obj[':a'];
}

randomQuote();
</script></html>